import { parseKleLayout } from "@/app/service/kle";
import { expect, it } from "vitest";

it("convert kle layout - asci104", () => {
  const input = require("./loadKleLayout.json");
  const result = parseKleLayout(input);
  const expected = {"physicalLayout":{"name":"custom","spacing":2.4,"keySize":2.2,"positions":[{"x":0,"y":0},{"x":1,"y":0},{"x":2,"y":0},{"x":3,"y":0},{"x":4,"y":0},{"x":5,"y":0},{"x":6,"y":0},{"x":7,"y":0},{"x":8,"y":0},{"x":9,"y":0},{"x":10,"y":0},{"x":11,"y":0},{"x":12,"y":0},{"x":13,"y":0},{"x":14,"y":0},{"x":15,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":2,"y":1},{"x":3,"y":1},{"x":4,"y":1},{"x":5,"y":1},{"x":6,"y":1},{"x":7,"y":1},{"x":8,"y":1},{"x":9,"y":1},{"x":10,"y":1},{"x":11,"y":1},{"x":12,"y":1},{"x":13,"y":1,"w":2},{"x":15,"y":1},{"x":16,"y":1},{"x":17,"y":1},{"x":18,"y":1},{"x":19,"y":1},{"x":20,"y":1},{"x":21,"y":1},{"x":0,"y":2,"w":1.5},{"x":1.5,"y":2},{"x":2.5,"y":2},{"x":3.5,"y":2},{"x":4.5,"y":2},{"x":5.5,"y":2},{"x":6.5,"y":2},{"x":7.5,"y":2},{"x":8.5,"y":2},{"x":9.5,"y":2},{"x":10.5,"y":2},{"x":11.5,"y":2},{"x":12.5,"y":2},{"x":13.5,"y":2,"w":1.5},{"x":15,"y":2},{"x":16,"y":2},{"x":17,"y":2},{"x":18,"y":2},{"x":19,"y":2},{"x":20,"y":2},{"x":21,"y":2,"h":2},{"x":0,"y":3,"w":1.75},{"x":1.75,"y":3},{"x":2.75,"y":3},{"x":3.75,"y":3},{"x":4.75,"y":3},{"x":5.75,"y":3},{"x":6.75,"y":3},{"x":7.75,"y":3},{"x":8.75,"y":3},{"x":9.75,"y":3},{"x":10.75,"y":3},{"x":11.75,"y":3},{"x":12.75,"y":3,"w":2.25},{"x":15,"y":3},{"x":16,"y":3},{"x":17,"y":3},{"x":0,"y":4,"w":2.25},{"x":2.25,"y":4},{"x":3.25,"y":4},{"x":4.25,"y":4},{"x":5.25,"y":4},{"x":6.25,"y":4},{"x":7.25,"y":4},{"x":8.25,"y":4},{"x":9.25,"y":4},{"x":10.25,"y":4},{"x":11.25,"y":4},{"x":12.25,"y":4,"w":2.75},{"x":15,"y":4},{"x":16,"y":4},{"x":17,"y":4},{"x":18,"y":4},{"x":19,"y":4,"h":2},{"x":0,"y":5,"w":1.25},{"x":1.25,"y":5,"w":1.25},{"x":2.5,"y":5,"w":1.25},{"x":3.75,"y":5,"w":6.25},{"x":10,"y":5,"w":1.25},{"x":11.25,"y":5,"w":1.25},{"x":12.5,"y":5,"w":1.25},{"x":13.75,"y":5,"w":1.25},{"x":15,"y":5},{"x":16,"y":5},{"x":17,"y":5},{"x":18,"y":5,"w":2},{"x":20,"y":5}]},"layers":[{"legends":["Esc","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","PrtSc","Scroll Lock","Pause\nBreak","~\n`","!\n1","@\n2","#\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=","Backspace","Insert","Home","PgUp","Num Lock","/","*","-","Tab","Q","W","E","R","T","Y","U","I","O","P","{\n[","}\n]","|\n\\","Delete","End","PgDn","7\nHome","8\n↑","9\nPgUp","+","Caps Lock","A","S","D","F","G","H","J","K","L",":\n;","\"\n'","Enter","4\n←","5","6\n→","Shift","Z","X","C","V","B","N","M","<\n,",">\n.","?\n/","Shift","↑","1\nEnd","2\n↓","3\nPgDn","Enter","Ctrl","Win","Alt","","Alt","Win","Menu","Ctrl","←","↓","→","0\nIns",".\nDel"],"name":"layer1","order":1}]}

  console.log(JSON.stringify(result));
  expect(result).toEqual(expected);
});
